<template name="chart">
	{{#if currentUser}}
	{{#contentFor "headerButtonLeft"}}
		{{>ionNavBackButton path="welcome"}}
	{{/contentFor}}

	{{#contentFor "headerTitle"}}
		<h1 class="title">Analytics</h1>
	{{/contentFor}}

	{{#ionView}}
	{{#ionContent}}
	{{#ionList}}
	
	<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	<script src="c3.js"></script>
	<script>
		$(document).ready(function(){
			var times = grabData("Running Time");
			$("#cardio,#strength,#flexibility").change(function(){
				var c1 = $("#cardio").find('option:selected').val();
				// var c2 = $("#strength").find('option:selected').val();
				// var c3 = $("#flexibility").find('option:selected').val();

				chart.hide(null,{
					withLegend: true
				});
				chart.show([c1],{ //,c2,c3
					withLegend: true
				});
			});
			$('#A').on('click',function(){
			chart.load({
				columns:[
					['Running Time', 60, 40, 120, 50, 100, 120],
				],
				unload: ['Running'],
			});
			});


		function grabData(exercise) {
			var x = Completed.find({_uID:Meteor.userId()}).fetch();
			console.log(x);
		}


		$('#B').on('click',function(){
			chart.load({
				columns:[
					['Running', 5, 10, 2, 4, 5, 8],
				],
					unload: ['Running Time'],

			$('#B').on('click',function(){
				chart.load({
					columns:[
						['Running', 5, 10, 2, 4, 5, 8],
					],
						unload: ['Running Time'],
				});
			});

			});

		var chart = c3.generate({
			bindto: '#chart',
			data:{
				x: 'x',
				columns: [
					['x', '2013-01-01', '2013-01-02', '2013-01-03', '2013-01-04', '2013-01-05', '2013-01-06'],
					['Running', 5, 10, 2, 4, 5, 8],
					['Walking', 3, 6, 2, 4, 5, 8],
					['Swimming', 1, 2, 1, 3, 5, 2],
					['Cycling', 10, 8, 9, 12, 4, 5]
				],
				types: {
					Running: 'area-spline',
					Walking: 'area-spline',
					Swimming: 'area-spline',
					Cycling: 'area-spline'
				},
				hide: true
			},
			subchart: {
		 		show: true
		 	},
		 	zoom: {
		 		enabled: true
		 	},
		 	axis: {
        		x: {
            		type: 'timeseries',
            		tick: {
                		format: '%Y-%m-%d'
            		}
        		}
        	},
			legend: {
				show: false
			}
		});

		

		// $("#showDis").on("change",function(e){
		// 	chart.hide(['Running'])
		// 	chart.load({
  //       		columns: [
  //           		['Time (min)', 45, 80, 60, 10, 25, 35]
  //      			]
  //      		});
		// });



		// $(function() {
		// 	console.log( "ready!" );
		// 		var chart = c3.generate({
		//     		data: {
		//         		x: 'x',
		//         		columns: [
		//             		['x', '2013-01-01', '2013-01-02', '2013-01-03', '2013-01-04', '2013-01-05', '2013-01-06'],
		//             		['Distance (mi)', 5, 10, 2, 4, 5, 8]
		//             		// ['data3', 400, 500, 450, 700, 600, 500]
		//         		],
		//         		types: {
		// 		            distance: 'area',
		// 		            // data2: 'area-spline'
		// 		        },

		// 		        // axes: {
		// 		        // 	data1: 'y',
		// 		        // 	data2: 'y2'
		// 		        // }
		// 		        // json: [{
		// 		        // 	date: '2014-01-04',
		// 		        // 	speed: ,
		// 		        // 	distance: {{Distance}}
		// 		        // }],
		// 		        // keys: {
		// 		        // 	x: 'date',
		// 		        // 	value: ['speed','distance']
		// 		        // }
		//     		},

		//     		subchart: {
		// 			  show: true
		// 			},

		//     		zoom: {
		// 		        enabled: true
		// 		    },

		//     		axis: {
		//         		x: {
		//             		type: 'timeseries',
		//             		tick: {
		//                 		format: '%Y-%m-%d'
		//             		},
		//             		label: {
		// 					  text: 'Date',
		// 					  // position: 'inner-top'
		// 					}

		//         		}
		//      //    		y: {
		// 					// label: {
		// 					//   text: 'Distance (mi)',
		// 					//   position: 'inner-top'
		// 					// }
		//     	//  		}
		//     	// 		y2: {
		//     	// 			label: {
		// 					//   text: 'Time (min)',
		// 					//   position: 'inner-top'
		// 					// },
		//     	// 			show:true
		//     	// 		}
		//     		}
		// 			});

				
		// 		// chart.hide(['data2', 'data3']);
		// 		// chart.show(['data2', 'data3']);

		// 		setTimeout(function () {
		//     		chart.load({
		//         		columns: [
		//             		['Time (min)', 45, 80, 60, 10, 25, 35]
		//        			],
		//      //   			axis: {
		//      //   				y: {
		// 					// label: {
		// 					//   text: 'Time (min)',
		// 					//   position: 'inner-top'
		// 					// }
		//     	//  			}	
		//      //   			}
		//      			unload: ['Distance (mi)'],
		//     		});
		// 		}, 2000);
		// });
		//window.onload = function
	</script>


	<body>
		<div class="card">
			<div class="item item-divider">
				<h2 class="text-center">
				Check Your Progress Here
				</h2>
			</div>

			<div class="list">
				<label class="item item-input item-select">
					<div class="input-label">
						Cardio
					</div>
					<select id="cardio">
						<option>--Choose An Exercise--</option>
						<option>Running</option>
						<option>Walking</option>
						<option>Swimming</option>
						<option>Cycling</option>
						<option>Elliptical</option>
						<option>Stairmaster</option>
					</select>
				</label>

				<!-- <label class="item item-input item-select">
					<div class="input-label">
						Strength
					</div>
					<select id="strength">
						<option>-Choose An Exercise-</option>
						<option>Arms</option>
						<option>Chest</option>
						<option>Core</option>
						<option>Legs</option>
					</select>
				</label>

				<label class="item item-input item-select">
					<div class="input-label">
						Flexibility
					</div>
					<select id="flexibility">
						<option>-Choose An Exercise-</option>
						<option>Yoga</option>
						<option>Stretching</option>
						<option>Pilates</option>
					</select>
				</label> -->

			</div>

			<div class='chart'>
			  <div id="chart"></div>
			</div>

			<div class="item tabs tabs-secondary">
				
				<button class="button button-outline button-calm" id="A">
				  Show Time
				</button>
				<button class="button button-outline button-royal" id="B">
				  Show Distance
				</button>
			
			</div>

		</div>

	</body>

	{{/ionList}}
	{{/ionContent}}
	{{/ionView}}

	{{else}}
		

		{{#ionView}}
			{{#ionContent}}
				
				<img id="logo" src="images/logo.png" width="300" height="300">
				
				{{> atForm}}

			{{/ionContent}}
		{{/ionView}}

	{{/if}}
</template>