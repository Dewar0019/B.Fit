<template name="profile">
    {{#contentFor "headerButtonLeft"}}
        {{>ionNavBackButton path="index"}}
    {{/contentFor}}


    {{#contentFor "headerTitle"}}
        <h1 class="title">User Accounts</h1>
    {{/contentFor}}


    {{#ionView}}
        {{#ionContent}}
            {{#if currentUser}}
                <head>
                  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
                  <link rel="stylesheet" type="text/css" href="profile.css">
                  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
                  <script type="text/javascript" src="profile.js"></script>
                </head>

                  <script>
                    $(document).ready(function(){
                        $(".editlink").on("click", function(e){
                          e.preventDefault();
                            var dataset = $(this).prev(".datainfo");
                            var savebtn = $(this).next(".savebtn");
                            var theid   = dataset.attr("id");
                            var newid   = theid+"-form";
                            var currval = dataset.text();
                            
                            dataset.empty();
                            
                            $('<input type="text" name="'+newid+'" id="'+newid+'" value="'+currval+'" class="hlite">').appendTo(dataset);
                            
                            $(this).css("display", "none");
                            savebtn.css("display", "block");
                        });
                        
                        $(".savebtn").on("click", function(e){
                            e.preventDefault();
                            var elink   = $(this).prev(".editlink");
                            var dataset = elink.prev(".datainfo");
                            var newid   = dataset.attr("id");
                            
                            var cinput  = "#"+newid+"-form";
                            var einput  = $(cinput);
                            var newval  = einput.attr("value");
                            
                            $(this).css("display", "none");
                            einput.remove();
                            dataset.html(newval);
                            
                            elink.css("display", "block");
                        });
                    });
                </script>
                

                <div class="list card">
                    <div class="item item-divider text-center">
                        <h2>{{getUserInfo.profile.firstName}} {{getUserInfo.profile.lastName}}</h2>
                    </div>
                    <div class="item item-avatar">
                        <a href="{{pathFor '#'}}"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
                        <img src="{{photo}}?s=200" alt="photo of {{profile.firstName}} {{profile.lastName}}" class="align-left img-circle">
                    </div>
                    
                        
                    <div class="item item-body">
                        <div id="wrapper">
                            <section id="core">
                                <div class="profileinfo">
                                    <div class="gear">
                                        <label>Primary E-Mail:</label>
                                        <span id="pemail" class="datainfo">{{getEmail}}</span>
                                        <!-- <a href="#" class="editlink">Edit Info</a>
                                        <a class="savebtn">Save</a> -->
                                    </div>
                                    
                                    <div class="gear">
                                        <label>Full Name:</label>
                                        <span id="fullname" class="datainfo">{{getUserInfo.profile.firstName}} {{getUserInfo.profile.lastName}}</span>
                                        <!-- <a href="#" class="editlink">Edit Info</a>
                                        <a class="savebtn">Save</a> -->
                                    </div>
                                    
                                  <!--   <div class="gear">
                                        <label>Last Name:</label>
                                        <span id="lastname" class="datainfo">{{getUserInfo.profile.lastName}}</span>
                                        <a href="#" class="editlink">Edit Info</a>
                                        <a class="savebtn">Save</a>
                                    </div> -->
                                    
                                    <div class="gear">
                                        <label>Weight:</label>
                                        <span id="weight" class="datainfo">{{getUserInfo.profile.currentWeight}}</span>
                                        <!-- <a href="#" class="editlink">Edit</a>
                                        <a class="savebtn">Save</a> -->
                                    </div>
                                </div>
                            </section>
                            <!-- <h2>{{> ionIcon icon="ios-speedometer-outline" class="positive"}} Weight: {{getUserInfo.profile.currentWeight}}</h2> -->
                        </div>
                     </div>
                </div>

                <div class="padding">
                    <button class="button button-positive button-block" data-action="logout">Log Out</button>
                </div>
        
            {{else}}
                {{> atForm}}
            {{/if}}

        {{/ionContent}}
    {{/ionView}}

</template>